<Window x:Class="barcode_gen.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:barcode_gen"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">

    <Window.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary Source="/Resources/Colors.xaml"/>
                </ResourceDictionary.MergedDictionaries>
            <ControlTemplate x:Key="ButtonTemplate1" TargetType="{x:Type Button}">
                <Border 
                    x:Name="border" 
                    Background="{StaticResource PrimaryBrush}" 
                    CornerRadius="6">
                    <ContentPresenter
                        TextElement.Foreground="{StaticResource PrimaryWhite}"
                        ContentStringFormat="{TemplateBinding ContentStringFormat}" 
                        ContentTemplate="{TemplateBinding ContentTemplate}" 
                        Content="{TemplateBinding Content}" 
                        HorizontalAlignment="Center" 
                        Margin="{TemplateBinding Padding}"
                        RecognizesAccessKey="True" 
                        VerticalAlignment="Center"
                        />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="border" Property="Background" Value="LightSkyBlue"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="border" Property="Background" Value="LightGray"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
                <ControlTemplate TargetType="ComboBox" x:Key="BasicComboBox">
                    <Grid>
                        <!-- Основная кнопка -->
                        <ToggleButton x:Name="ToggleButton" 
                              BorderThickness="1"
                              IsChecked="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}"
                                      Foreground="White">
                            
                            <ContentPresenter  Content="{TemplateBinding SelectionBoxItem}" 
                                      Margin="5" />
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Border x:Name="border"  Background="{StaticResource PrimaryBrush}"
                                             BorderBrush="{StaticResource PrimaryBrush}"
                                             CornerRadius="2">
                                    <StackPanel Orientation="Horizontal">
                                        <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Content="{TemplateBinding Content}"/>
                                        
                                    </StackPanel>
                                        
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryHoverBrush}"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="{StaticResource PrimaryPressedBrush}"/>
                                        </Trigger>
                                    
                                </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                    <!-- Всплывающий список -->
                        <Popup x:Name="Popup"
                           Placement="Bottom"
                           IsOpen="{TemplateBinding IsDropDownOpen}"
                           AllowsTransparency="True"
                           Focusable="False"
                           PopupAnimation="Fade"
                           Width="{Binding ActualWidth, ElementName=ToggleButton}"
                               
                               >

                        <Border  Background="{StaticResource PrimaryBrush}" 
                                 BorderBrush="{StaticResource PrimaryBrush}" 
                                 BorderThickness="1"
                                 x:Name="PopupBorder"
                                 >
                                <ScrollViewer Margin="0">
                                    
                                    <ItemsPresenter  />
                                </ScrollViewer>
                            </Border>
                            
                        </Popup>
                     
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsDropDownOpen" Value="True">
                        <Setter TargetName="PopupBorder" Property="Background" Value="Red"/>
                    </Trigger>
                </ControlTemplate.Triggers>
                </ControlTemplate>
        </ResourceDictionary>
        
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="8*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <!--#region Left -->
        
        <Grid Grid.Column="0" Grid.Row="0" Grid.RowSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.1*"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Button  
                    Command="{Binding AddBlockCommand}"
                    Template="{DynamicResource ButtonTemplate1}"
                    Margin="3"> Добавить </Button>
            </Grid>
            <Grid Grid.Row="1">
                <StackPanel Height="150">
                <ComboBox 
                    Template="{DynamicResource BasicComboBox}"
                    Grid.Column="0"
                    Grid.Row="0"
                    Height="50">
                        <ComboBoxItem Height="20">text</ComboBoxItem>

                    </ComboBox>
                <ComboBoxItem Height="20">text</ComboBoxItem>
                </StackPanel>
                <ItemsControl  ItemsSource="{Binding Blocks}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border CornerRadius="5" 
                                BorderBrush="{StaticResource PrimaryBrush}" 
                                BorderThickness="1"
                                Margin="5"
                                Padding="5">
                                <StackPanel Orientation="Horizontal">
                                    <ComboBox 
                                            ItemsSource="{Binding Types}"
                                            SelectedItem="{Binding SelectedType, Mode=TwoWay}"
                                            Grid.Column="0"
                                            Grid.Row="0">           
                                      
                                    </ComboBox>

                                    <Button Content="X"
                                    Command="{Binding RemoveCommand}" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Grid>
        </Grid>
     
        <Grid Grid.Column="0"
              Grid.Row="1">
            
        </Grid>
        <!--#endregion-->
        <!--#region Center -->
        <Grid Grid.Row="0" Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
        <Border Padding="5" Margin="10" 
            Grid.Row="0"
           CornerRadius="5" 
           BorderBrush="{StaticResource PrimaryBrush}" 
           BorderThickness="1">
            <TextBox x:Name="TBData" BorderThickness="0"  AcceptsReturn="True"></TextBox>
        </Border>
        <StackPanel 
            Grid.Row="1"
            VerticalAlignment="Bottom"
            Margin="10" >
            <!--#region first line -->

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Label>Преффикс</Label>
                <Label Grid.Column="1">Суффикс</Label>
            </Grid>
            <Grid
                Margin="0 -3 0 0"
                >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="TBPrefix"
                    Padding="5"
                    Margin="0 0 20 0">A-</TextBox>
                <TextBox
                    x:Name="TBSuffix"
                    Padding="5"
                    Grid.Column="1" Margin="0 0 20 0">-Z</TextBox>
            </Grid>
            <!--#endregion-->
            <!--#region second line -->

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Label>От</Label>
                <Label Grid.Column="1">До</Label>
            </Grid>
            <Grid
                Margin="0 -3 0 0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="40*"/>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="37*"/>
                </Grid.ColumnDefinitions>
                <TextBox 
                    Padding="5"
                    x:Name="TBFrom"
                    Margin="0,0,20,0">10</TextBox>
                <TextBox
                    x:Name="TBTo"
                    Padding="5"
                    Grid.Column="1" Margin="0,0,20,0" Grid.ColumnSpan="2">100</TextBox>
            </Grid>
            <!--#endregion-->
            <!--#region third line -->

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Label>Шаг</Label>
                <Label Grid.Column="1">Маска</Label>
            </Grid>
            <Grid
                Margin="0 -3 0 0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <TextBox
                    x:Name="TBStep"
                    Padding="5"
                    Margin="0 0 20 0">10</TextBox>
                <TextBox 
                    x:Name="TBMask"
                    Padding="5"
                    Grid.Column="1" Margin="0 0 20 0">$$$$</TextBox>
            </Grid>
            <!--#endregion-->
        </StackPanel>
        </Grid>
        <Grid 
                    Grid.Row="1"
                    Grid.Column="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.2*"/>
                <ColumnDefinition Width="0.5*"/>
            </Grid.ColumnDefinitions>
            <Button Template="{DynamicResource ButtonTemplate1}"
                    Grid.Column="0"
                Margin="10"
                Content="Создать последовательность"
                Click="Button_Click_1">
            </Button>
            <Button Template="{DynamicResource ButtonTemplate1}"
                    Grid.Column="1"
                Margin="10"
                Content="Очистить"
                Click="Button_Click_2"> 
            </Button>
        </Grid>
       
        <!--#endregion-->
        <!--#region Right -->
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <Canvas
                x:Name="LabelCanvas"
                Grid.Row="0"
                Background="Red"
                Margin="0 0 20 0"
                Height="100"
                VerticalAlignment="Top">


                <TextBlock
                    Canvas.Left="100"
                    Canvas.Top="50"
                    Background="Blue"
                    Text="Some"
                    MouseLeftButtonDown="TextBlock_MouseLeftButtonDown"
                    MouseMove="TextBlock_MouseMove"
                    MouseLeftButtonUp="TextBlock_MouseLeftButtonUp"/>
            </Canvas>
            <Grid 
                x:Name="GSizes"
                Margin="10 0 0 0"
                Grid.Row="1"
                >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.5*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <RadioButton 
                    Grid.Column="0" GroupName="Label"
                    Content="Маленькая"
                    IsChecked="{Binding SelectedMode,
                             Converter={StaticResource EnumToBoolConverter},
                             ConverterParameter=Small}" />

                <RadioButton 
                    Grid.Column="1" GroupName="Label"
                    Content="Большая"
                    IsChecked="{Binding SelectedMode,
                             Converter={StaticResource EnumToBoolConverter},
                             ConverterParameter=Large}" />
            </Grid>
            
            <!--#endregion-->
        </Grid>
        <Button 
            Template="{DynamicResource ButtonTemplate1}"  
            Grid.Column="2" 
            Margin="10"
            Grid.Row="1" >Создать</Button>
    </Grid>


</Window>
